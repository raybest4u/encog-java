<project name="encog-core" default="dist" basedir=".">
	<description>
        Build the core JAR file for Encog.
    </description>
	<!-- set global properties for this build -->
	<property name="src" location="${basedir}/src" />
	<property name="test" location="${basedir}/test" />
	<property name="build" location="${basedir}/build" />
	<property name="dist" location="${basedir}/dist" />
	<property name="lib" location="${basedir}/lib" />
	<property name="stage" location="${basedir}/stage" />
	<property name="doc" location="${basedir}/doc" />
	<property name="jar" location="${basedir}/jar" />
	<property name="jarfile" location="${lib}/encog-core.jar"/>
	<path id="classpath">
       <fileset dir="${jar}"/>	   
   </path>	

	<target name="checkout" depends="init">

		<exec executable="svn">
			<arg value="checkout"/>
			<arg value="http://encog-java.googlecode.com/svn/trunk/encog-core"/>
			<arg value="${basedir}"/>
		</exec>
		
	</target>
	
	<target name="init">
		<!-- Create the build directory structure used by compile -->
		<mkdir dir="${build}" />
		<mkdir dir="${doc}" />
	</target>

	<target name="compile" depends="init" description="compile the source ">
		<!-- Compile the java code from ${src} into ${build} -->
		<javac srcdir="${src}" source="1.5" target="1.5" destdir="${build}" >
			<classpath refid="classpath"/>
		</javac>
	</target>

	<target name="doc" depends="init" description="produce javadoc ">
		<javadoc sourcepath="${src}" destdir="${doc}" header="&lt;a href='http://www.heatonresearch.com/encog' target='_top'&gt;The Encog Project&lt;/a&gt;" >
			<classpath refid="classpath"/>
		</javadoc>
	</target>

	<target name="dist" depends="compile,doc" description="generate the distribution">
		<!-- Create the distribution directory -->
		<mkdir dir="${dist}" />
		<mkdir dir="${stage}" />
		<mkdir dir="${lib}" />

		<copy todir="${build}/org/encog/data">
			<fileset dir="src/org/encog/data"/>
		</copy>		
				
		<jar jarfile="${jarfile}" basedir="${build}" />
						
	</target>
	
	<target name="cc-build" depends="clean-all,checkout,compile,doc,dist">

		<copy todir="${stage}" file="${basedir}/copyright.txt"/>
		<copy todir="${stage}" file="${basedir}/build.xml"/>
		<copy todir="${stage}" file="${basedir}/.checkstyle"/>
		<copy todir="${stage}" file="${basedir}/.classpath"/>
		<copy todir="${stage}" file="${basedir}/.project"/>

	
		<copy todir="${stage}/src">
			<fileset dir="${src}"/>	
		</copy>
		
		<copy todir="${stage}/jar">
			<fileset dir="${jar}"/>	
		</copy>
		
		<copy todir="${stage}/doc">
			<fileset dir="${doc}"/>	
		</copy>
		
		<copy todir="${stage}/lib" file="${jarfile}"/>
		
		
				
		<zip destfile="${dist}/encog-code.zip" >
			<fileset dir="${stage}"/>
		</zip>	
	
	</target>
	
	<target name="clean-all" depends="clean" description="Delete the source code">
		<delete dir="${src}" />
		<delete dir="${test}" />
	</target>

	<target name="clean" description="clean up">
		<!-- Delete the ${build} and ${dist} directory trees -->
		<delete dir="${stage}" />
		<delete dir="${jar}" />
		<delete dir="${lib}" />
		<delete dir="${build}" />
		<delete dir="${dist}" />
		<delete dir="${doc}" />
	</target>
</project>